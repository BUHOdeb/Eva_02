{% extends "base.html" %}

{% block content %}

<div class="page-header">
    <h1><i class="bi bi-door-open"></i> Salas Disponibles</h1>
    <p>Selecciona y reserva la sala que necesites</p>
</div>

<div class="salas-grid">
  {% for sala in salas %}
    <div class="sala-card">
        <div class="sala-icon">
            <i class="bi bi-building"></i>
        </div>
        
        <h3>
            <a href="{% url 'salas:detalle' sala.pk %}" style="text-decoration: none; color: inherit;">
                {{ sala.nombre }}
            </a>
        </h3>

        <div class="sala-info">
            <div class="info-item">
                <i class="bi bi-people"></i>
                <span>Capacidad: <strong>{{ sala.capacidad }} personas</strong></span>
            </div>
            
            <div class="info-item">
                <i class="bi bi-check-circle"></i>
                <span>{{ sala.habilitada|yesno:"Habilitada,Deshabilitada" }}</span>
            </div>
        </div>

        {% if sala.disponible %}
            <span class="status-badge status-disponible">
                <i class="bi bi-check-circle-fill"></i>
                Disponible Ahora
            </span>
            <a href="{% url 'salas:crear_reserva' %}?sala={{ sala.pk }}" class="btn-reservar">
                <i class="bi bi-calendar-plus"></i> Reservar Sala
            </a>
        {% else %}
            <span class="status-badge status-reservada">
                <i class="bi bi-lock-fill"></i>
                Reservada
            </span>
            {% with r=sala.reserva_activa %}
                {% if r %}
                    <div class="reserva-info">
                        <strong><i class="bi bi-clock"></i> Reservada:</strong><br>
                        {{ r.fecha_inicio|date:"d/m/Y H:i" }} â†’ {{ r.fecha_termino|date:"d/m/Y H:i" }}
                    </div>
                {% endif %}
            {% endwith %}
        {% endif %}
    </div>
  {% endfor %}
</div>

{% endblock %}